<!-- pages/appointment/doctorInfo/doctorInfo.wxml -->
<import src="../../../component/appToast/appToast.wxml"/>
<template is="toast" data="{{ ..._toast_ }}"/>

<wxs module="tool" src="/utils/tool.wxs"></wxs>
<view class="doc-block">
	<image src="../../../image/dr.png" mode="scaleToFill"></image>
	<view class="doc">
		<text class="name">{{doctor.name}}</text>
		<text class="pos">{{doctor.departmentName}}</text>
		<text class="pos">{{doctor.title}}</text>
	</view>
	<text class="brief">专长：{{doctor.specialty}}</text>
	<text class="brief">简介：{{doctor.bio}}</text>
</view>
<text class="title">医生七天排班</text>
<view class="doctor-list-box">
	<!-- 横向滚动的日期选择器 -->
	<scroll-view scroll-x="true" class="date-scroll-container">
		<view class="time-list" wx:for="{{scheduleList}}" wx:key="index" 
			style="background-color: {{index===scheduleChoice ? '#fff' : '#f6f6f7'}}; border: {{index===scheduleChoice ? '2px solid #006eff' : '1px solid #eee'}};" 
			data-index="{{index}}" bindtap="changeSchedule">
			<view class="time-date" style="color: {{index===scheduleChoice ? '#006eff' : '#333'}}; text-align: center; display: flex; align-items: center; justify-content: center; height: 100%;">{{tool.formatDate(item.scheduleDate)}}</view>
		</view>
	</scroll-view>
	<view class="schedule" wx:for="{{scheduleList[scheduleChoice].schedules}}" wx:for-item="item1" wx:key="index1">
			<view class="schedule-content">
				<view class="schedule-info">
					<!-- 展示排班类型 -->
					<view class="slot-type">
						<text wx:if="{{item1.slotType === 1}}">普通</text>
						<text wx:elif="{{item1.slotType === 2}}">专家</text>
						<text wx:else>特需</text>
					</view>
					<!-- 展示时间段 -->
					<view class="slot-period">
						<text wx:if="{{item1.slotPeriod === 1}}">8:00-8:30</text>
						<text wx:elif="{{item1.slotPeriod === 2}}">8:30-9:00</text>
						<text wx:elif="{{item1.slotPeriod === 3}}">9:00-9:30</text>
						<text wx:elif="{{item1.slotPeriod === 4}}">9:30-10:00</text>
						<text wx:elif="{{item1.slotPeriod === 5}}">10:00-10:30</text>
						<text wx:elif="{{item1.slotPeriod === 6}}">10:30-11:00</text>
						<text wx:elif="{{item1.slotPeriod === 7}}">13:30-14:00</text>
						<text wx:elif="{{item1.slotPeriod === 8}}">14:00-14:30</text>
						<text wx:elif="{{item1.slotPeriod === 9}}">14:30-15:00</text>
						<text wx:elif="{{item1.slotPeriod === 10}}">15:00-15:30</text>
						<text wx:elif="{{item1.slotPeriod === 11}}">15:30-16:00</text>
						<text wx:elif="{{item1.slotPeriod === 12}}">16:00-16:30</text>
						<text wx:else>{{item1.slotPeriod}}</text>
					</view>
					<!-- 展示号源信息 -->
					<view class="slot-number">
						<text>{{item1.availableSlots}}/{{item1.totalSlots}}</text>
					</view>
					<!-- 展示费用 -->
					<view class="slot-fee">¥{{item1.fee}}</view>
				</view>
				<!-- 展示状态 -->
				<view class="slot-status">
					<text wx:if="{{item1.availableSlots > 0 && item1.status === 1}}" class="status-available" data-info="{{item1}}"bindtap="bookAppointment">预约</text>
					<text wx:elif="{{item1.availableSlots === 0 || item1.status === 2}}" class="status-available" data-info="{{item1}}"bindtap="addWaitlist">候补</text>
					<text wx:else class="status-unavailable">不可约</text>
				</view>
			</view>
		</view>
</view>
<view style="width: 1;height: 35px;"></view>